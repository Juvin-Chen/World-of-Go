# 泛型插件化支付网关项目说明

## 项目介绍

本项目是一个基于 **Go 语言** 开发的**模拟企业级泛型插件化支付网关系统**，实现了用户登录、多支付方式选择、余额读取、泛型统一支付处理等完整支付流程。

系统采用**策略模式 + Go 泛型**设计，支持支付宝、微信支付等多种支付方式灵活扩展，支付逻辑与网关逻辑解耦，具备高可维护性与扩展性。

------

## 项目结构

```go
Project_泛型插件化支付网关/
├── configs/                  # 配置文件目录
│   ├── payment_balance.json  # 支付账户余额数据
│   └── user.json             # 用户信息数据
├── internal/                 # 项目内部私有包
│   ├── payment/              # 支付核心模块
│   │   ├── utils/            # 支付工具子包
│   │   │   └── calculator.go # 支付相关计算工具
│   │   ├── gateway.go        # 泛型支付网关实现
│   │   └── payment.go        # 支付策略、支付插件实现
│   └── user/                 # 用户模块
│       └── user.go           # 用户登录逻辑
├── app.go                    # 项目入口文件
├── go.mod                    # Go 模块依赖声明
└── README.md                 # 项目说明文档
```

------

## 核心功能

1. **用户登录验证**
   - 支持循环输入，登录失败可重新尝试
   - 从 `user.json` 读取用户信息并绑定对应支付账户
2. **多支付方式支持**
   - 支付宝支付
   - 微信支付
   - 插件化设计，可快速扩展银联、数字人民币等
3. **JSON 余额持久化**
   - 从 `payment_balance.json` 读取用户真实余额
   - 支持 Alipay1001~1003、WeChat1001~1003 等账户
4. **泛型统一支付网关**
   - 使用 Go 泛型实现通用支付结果
   - 统一金额校验、支付调用、结果返回
   - 支付成功 / 失败状态标准化输出
5. **健壮输入处理**
   - 非法输入自动重试
   - 输入缓冲区清空，避免死循环
   - 完善错误提示

------

## 支付流程

1. 启动系统 → 用户选择登录 / 退出
2. 用户登录成功 → 进入支付方式选择
3. 选择支付宝 / 微信支付 → 输入支付金额
4. 系统从 `payment_balance.json` 读取对应账户余额
5. 泛型网关统一处理支付请求
6. 校验金额 → 执行支付 → 更新余额 → 返回支付结果

------

## 扩展说明

- **新增支付方式**：只需实现 `PaymentStrategy` 接口，无需修改网关代码
- **新增用户账户**：在 `payment_balance.json` 中追加对应 `PaymentID` 与 `Balance`
- **扩展支付结果**：通过泛型 `T` 支持交易号、结构体、复杂报文等任意返回类型

------

> 个人lab4的Project设计