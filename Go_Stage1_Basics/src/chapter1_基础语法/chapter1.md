# 📘 第 1 章 基础语法

> Based on `chapter1.go` code practice.
> **核心目标**: 掌握变量、常量、基础数据类型、运算符及 I/O 格式化。

## 1. 程序结构 (Program Structure)

- **包声明**: 首行必须声明 `package main` 才能作为可独立执行的程序。
- **入口函数**: `func main()` 是程序启动后执行的第一个函数。
- **可见性规则 (Visibility)**: Go 语言没有 `public`/`private` 关键字，依靠**首字母大小写**控制：
  - **大写开头** (e.g., `fmt.Println`): **导出 (Public)**，外部包可见。
  - **小写开头**: **私有 (Private)**，仅当前包内可见。

## 2. 变量 (Variables)

Go 提供了多种声明方式，适应不同场景。

### 声明方式

1. **标准声明** (通用，可用于全局):

   ```go
   var age int
   var name string = "Go"
   var a, b int = 1, 2 // 批量声明
   ```

2. **类型推导**:

   ```go
   var score = 95.5 // 自动推导为 float64
   ```

3. **短变量声明 `:=`** (仅限函数内部):

   ```go
   msg := "Hello"
   x, y := 1, 2
   ```

   *注意*: `:=` 左侧必须至少有一个新变量。

4. **因式分解写法** (常用于全局):

   ```go
   var (
       GlobalA int
       GlobalB string
   )
   ```

### 特殊操作

- **多重赋值 / 交换变量**:

  ```go
  a, b = b, a // 极其简洁的交换写法
  ```

- 匿名变量 (Blank Identifier _):

  用于忽略不需要的返回值，避免“声明未通过”报错。

  Go

  ```
  _, b = 5, 7 // 忽略 5，只接收 7
  ```

## 3. 数据类型 (Data Types)

### 基础类型

| **类型**             | **描述**     | **备注**                        |
| -------------------- | ------------ | ------------------------------- |
| `bool`               | 布尔型       | true / false                    |
| `string`             | 字符串       | UTF-8 编码，不可变              |
| `int`, `uint`        | 平台相关整型 | 大小随系统 (32位/64位) 变化     |
| `int8` - `int64`     | 固定位整型   | 跨平台开发、二进制协议首选      |
| `float32`, `float64` | 浮点型       | 默认使用 **float64** 以保证精度 |
| `complex64/128`      | 复数         | 实部 + 虚部                     |

### 字符的特殊处理

- **`byte`**: `uint8` 的别名。用于处理**字节** (ASCII, 二进制流)。
- **`rune`**: `int32` 的别名。用于处理**Unicode 字符** (中文, Emoji)。

### 零值 (Zero Value)

变量声明但未赋值时的默认值：

- 数值类型: `0`
- 布尔类型: `false`
- 字符串: `""` (空串)
- 引用/接口 (`slice`, `map`, `chan`, `ptr`): `nil`

## 4. 常量与枚举 (Constants & Enums)

### 基础常量

使用 `const` 定义，编译期确定，运行时不可修改。

Go

```
const PI float64 = 3.14159
const MAX_NUM = 100 // 隐式类型
```

### iota 枚举器 (核心重点)

`iota` 是 const 语句块里的**行索引计数器**。

1. **自动递增**: 每新增一行，`iota` 加 1。
2. **表达式继承**: 如果某一行没写表达式，默认继承上一行的逻辑。

**示例 1: 普通枚举**

Go

```go
const (
    Unknown = iota // 0
    Female         // 1 (iota++)
    Male           // 2 (iota++)
)
```

**示例 2: 位运算与表达式继承**

Go

```go
const (
    i = 1 << iota  // 1 << 0 = 1
    j = 3 << iota  // 3 << 1 = 6
    k              // 3 << 2 = 12 (继承 "3 << iota")
    l              // 3 << 3 = 24 (继承 "3 << iota")
)
```

## 5. 格式化输出 (Formatting)

Go 的 `fmt` 包提供了丰富的格式化动词。

- **`fmt.Print` / `fmt.Println`**: 默认格式输出（Println 自动换行）。
- **`fmt.Printf`**: 格式化输出到控制台。
- **`fmt.Sprintf`**: 格式化并**返回字符串** (不输出)。

常用占位符:

| 占位符 | 含义             | 示例         |
| ------ | ---------------- | ------------ |
| %v     | 通用格式 (Value) | 自动识别类型 |
| %d     | 十进制整数       | 123          |
| %s     | 字符串           | hello        |
| %q     | 带引号字符串     | "hello"      |
| %f     | 浮点数           | 3.14         |
| %T     | 变量类型         | int, string  |

## 6. 运算符 (Operators)

- **算术**: `+`, `-`, `*`, `/`, `%`, `++`, `--`
- **逻辑**: `&&` (与), `||` (或), `!` (非)
- **位运算**: `&`, `|`, `^` (异或), `<<` (左移), `>>` (右移)
- **指针操作**:
  - `&`: 取地址 (Address of)
  - `*`: 取值 (Value of pointer)